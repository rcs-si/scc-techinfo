<!DOCTYPE html>
<html>
<head>
    <title>Cluster Nodes</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/2.3.2/css/dataTables.dataTables.css" />
</head>
<body style="font-family: 'BentonSansRegular', Arial, 'Lucida Grande', sans-serif; font-size: 0.8em;">
    <!-- Filter Controls -->
    <div style="margin-bottom:10px;">
      <label><input type="checkbox" id="cpuOnly"> Show CPU only nodes</label>
      <label style="margin-left:10px;"><input type="checkbox" id="gpuOnly"> Show Nodes With GPU</label>
      <label style="margin-left:10px;"><input type="checkbox" id="sharedOnly"> Show only Shared nodes</label>
      <label style="margin-left:10px;">Minimum RAM (GB):
        <input type="number" id="minRAM" min="0" style="width:60px;">
      </label>
    </div>
    <!-- Table -->
    <table id="cluster" class="cell-border stripe hover compact">
        <thead>
            <tr>
                <th>Host<br>Names</th>
                <th>Processor<br>Type</th>
                <th>Cores</th>
                <th>Memory<br>(GB)</th>
                <th>GPU<br>Type</th>
                <th># of<br>GPU</th>
                <th>(S)hared /<br> (B)uy in</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/2.3.2/js/dataTables.js"></script>
    <script src="./data.js"></script>
    <script>
        // Custom filter logic
        $.fn.dataTable.ext.search.push(function(settings, data, dataIndex) {
            var processorType = data[1].trim().toLowerCase();
            var memoryGB = parseInt(data[3]);
            var gpuType = data[4].trim().toLowerCase();
            var numGPU = parseInt(data[5]);
            var sharing = data[6].trim().toUpperCase();

            var cpuOnly = $('#cpuOnly').prop('checked');
            var gpuOnly = $('#gpuOnly').prop('checked');
            var sharedOnly = $('#sharedOnly').prop('checked');
            var minRAM = parseInt($('#minRAM').val()) || 0;

            if (cpuOnly && (gpuType !== 'none' || numGPU > 0)) return false;
            if (gpuOnly && (gpuType === 'none' || numGPU === 0)) return false;
            if (sharedOnly && sharing !== 'S') return false;
            if (memoryGB < minRAM) return false;

            return true;
        });

        $(document).ready(function() {
            var table = $('#cluster').DataTable({
                data: data
            });

            $('#cpuOnly, #gpuOnly, #sharedOnly, #minRAM').on('change keyup', function() {
                table.draw();
            });
        });
    </script>
</body>
</html>